<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>PluginMetadata.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Core XMPP Server</a> &gt; <a href="index.source.html" class="el_package">org.jivesoftware.openfire.container</a> &gt; <span class="el_source">PluginMetadata.java</span></div><h1>PluginMetadata.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2017 Ignite Realtime Foundation. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.jivesoftware.openfire.container;

import org.jivesoftware.util.JavaSpecVersion;
import org.jivesoftware.util.Version;

import java.net.URL;
import java.nio.file.Path;

/**
 * A bean-like representation of the metadata of a plugin.
 *
 * @author Guus der Kinderen, guus.der.kinderen@gmail.com
 */
public class PluginMetadata
{
    /**
     * Human readable name of the plugin.
     */
    private final String name;

    /**
     * Canonical name of the plugin.
     */
    private final String canonicalName;

    /**
     * Description of the plugin as specified in plugin.xml.
     */
    private final String description;

    /**
     * The version of the plugin.
     */
    private final Version version;

    /**
     * Author of the plugin as specified in plugin.xml.
     */
    private final String author;

    /**
     * Icon's location of the plugin.
     */
    private final URL icon;

    /**
     * Changelog location of the latest version of the plugin.
     */
    private final URL changelog;

    /**
     * ReadMe location of the latest version of the plugin.
     */
    private final URL readme;

    /**
     * Type of license of the plugin.
     */
    private final String license;

    /**
     * Minimum server version (inclusive) required by this plugin as specified in plugin.xml.
     */
    private final Version minServerVersion;

    /**
     * Maximum server version (exclusive) required by this plugin as specified in plugin.xml.
     */
    private final Version priorToServerVersion;

    /**
     * Minimum Java (specification) version (inclusive( required by this plugin as specified in plugin.xml.
     */
    private final JavaSpecVersion minJavaVersion;

    /**
     * Constructs a metadata object based on a plugin.
     *
     * The plugin must be installed in Openfire.
     *
     * @param pluginDir the path of the plugin directory (cannot be null)
     * @return Metadata for the plugin (never null).
     */
    public static PluginMetadata getInstance( Path pluginDir )
    {
<span class="nc" id="L102">        return new PluginMetadata(</span>
<span class="nc" id="L103">                PluginMetadataHelper.getName( pluginDir ),</span>
<span class="nc" id="L104">                PluginMetadataHelper.getCanonicalName( pluginDir ),</span>
<span class="nc" id="L105">                PluginMetadataHelper.getDescription( pluginDir ),</span>
<span class="nc" id="L106">                PluginMetadataHelper.getVersion( pluginDir ),</span>
<span class="nc" id="L107">                PluginMetadataHelper.getAuthor( pluginDir ),</span>
<span class="nc" id="L108">                PluginMetadataHelper.getIcon( pluginDir ),</span>
<span class="nc" id="L109">                PluginMetadataHelper.getChangelog( pluginDir ),</span>
<span class="nc" id="L110">                PluginMetadataHelper.getReadme( pluginDir ),</span>
<span class="nc" id="L111">                PluginMetadataHelper.getLicense( pluginDir ),</span>
<span class="nc" id="L112">                PluginMetadataHelper.getMinServerVersion( pluginDir ),</span>
<span class="nc" id="L113">                PluginMetadataHelper.getPriorToServerVersion( pluginDir ),</span>
<span class="nc" id="L114">                PluginMetadataHelper.getMinJavaVersion( pluginDir )</span>
                );
    }

    /**
     * Constructs a metadata object based on a plugin.
     *
     * The plugin must be installed in Openfire.
     *
     * @param plugin The plugin (cannot be null)
     * @return Metadata for the plugin (never null).
     */
    public static PluginMetadata getInstance( Plugin plugin )
    {
<span class="nc" id="L128">        return new PluginMetadata(</span>
<span class="nc" id="L129">                PluginMetadataHelper.getName( plugin ),</span>
<span class="nc" id="L130">                PluginMetadataHelper.getCanonicalName( plugin ),</span>
<span class="nc" id="L131">                PluginMetadataHelper.getDescription( plugin ),</span>
<span class="nc" id="L132">                PluginMetadataHelper.getVersion( plugin ),</span>
<span class="nc" id="L133">                PluginMetadataHelper.getAuthor( plugin ),</span>
<span class="nc" id="L134">                PluginMetadataHelper.getIcon( plugin ),</span>
<span class="nc" id="L135">                PluginMetadataHelper.getChangelog( plugin ),</span>
<span class="nc" id="L136">                PluginMetadataHelper.getReadme( plugin ),</span>
<span class="nc" id="L137">                PluginMetadataHelper.getLicense( plugin ),</span>
<span class="nc" id="L138">                PluginMetadataHelper.getMinServerVersion( plugin ),</span>
<span class="nc" id="L139">                PluginMetadataHelper.getPriorToServerVersion( plugin ),</span>
<span class="nc" id="L140">                PluginMetadataHelper.getMinJavaVersion( plugin )</span>

        );
    }

    public PluginMetadata( String name, String canonicalName, String description, Version version, String author,
                           URL icon, URL changelog, URL readme, String license,
                           Version minServerVersion, Version priorToServerVersion, JavaSpecVersion minJavaVersion )
<span class="nc" id="L148">    {</span>
<span class="nc" id="L149">        this.name = name;</span>
<span class="nc" id="L150">        this.canonicalName = canonicalName;</span>
<span class="nc" id="L151">        this.description = description;</span>
<span class="nc" id="L152">        this.version = version;</span>
<span class="nc" id="L153">        this.author = author;</span>
<span class="nc" id="L154">        this.icon = icon;</span>
<span class="nc" id="L155">        this.changelog = changelog;</span>
<span class="nc" id="L156">        this.readme = readme;</span>
<span class="nc" id="L157">        this.license = license;</span>
<span class="nc" id="L158">        this.minServerVersion = minServerVersion;</span>
<span class="nc" id="L159">        this.priorToServerVersion = priorToServerVersion;</span>
<span class="nc" id="L160">        this.minJavaVersion = minJavaVersion;</span>
<span class="nc" id="L161">    }</span>

    public String getName()
    {
<span class="nc" id="L165">        return name;</span>
    }

    public String getCanonicalName()
    {
<span class="nc" id="L170">        return canonicalName;</span>
    }

    public String getDescription()
    {
<span class="nc" id="L175">        return description;</span>
    }

    public Version getVersion()
    {
<span class="nc" id="L180">        return version;</span>
    }

    public String getAuthor()
    {
<span class="nc" id="L185">        return author;</span>
    }

    public URL getIcon()
    {
<span class="nc" id="L190">        return icon;</span>
    }

    public URL getChangelog()
    {
<span class="nc" id="L195">        return changelog;</span>
    }

    public URL getReadme()
    {
<span class="nc" id="L200">        return readme;</span>
    }

    public String getLicense()
    {
<span class="nc" id="L205">        return license;</span>
    }

    public Version getMinServerVersion()
    {
<span class="nc" id="L210">        return minServerVersion;</span>
    }

    public Version getPriorToServerVersion()
    {
<span class="nc" id="L215">        return priorToServerVersion;</span>
    }

    public JavaSpecVersion getMinJavaVersion()
    {
<span class="nc" id="L220">        return minJavaVersion;</span>
    }

    public String getHashCode() {
<span class="nc" id="L224">        return String.valueOf( hashCode() );</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>